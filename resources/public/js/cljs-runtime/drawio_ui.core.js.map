{"version":3,"sources":["drawio_ui/core.cljs"],"mappings":"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","names":["js/drawio-ui","js/drawio-ui.core","js/drawio-ui.core.current-route","drawio-ui.core/current-route","reagent.core.atom","drawio-ui.core/routes","drawio-ui.core/parse-url","url","match","bidi.bidi/match-route","or__5002__auto__","drawio-ui.core/set-route!","route","cljs.core/reset!","drawio-ui.core/handle-route-change","path","js/window","drawio-ui.core/header","drawio-ui.core/home-page","drawio-ui.core/upload-page","drawio-ui.upload/upload-component","drawio-ui.core/diagrams-page","drawio-ui.core/diagram-page","map__23613","cljs.core/--destructure-map","cljs.core.get","id","cljs.core/deref","drawio-ui.core/not-found-page","drawio-ui.core/app","G__23618","cljs.core/Keyword","drawio-ui.core/init","drawio-ui.storage/init!","js/document","e","target","href","and__5000__auto__","cljs.core._EQ_","cljs.core/not","js/history","reagent.dom.render","cljs.core.println"],"sourcesContent":["(ns drawio-ui.core\n  (:require [reagent.core :as r]\n            [reagent.dom :as rdom]\n            [bidi.bidi :as bidi]\n            [drawio-ui.storage :as storage]\n            [drawio-ui.upload :as upload]))\n\n(defonce current-route (r/atom {:handler :home :route-params {}}))\n\n(def routes\n  [\"/\" {\"\" :home\n        \"upload\" :upload\n        \"diagrams\" :diagrams\n        [\"diagram/\" :id] :diagram}])\n\n(defn- parse-url [url]\n  (let [match (bidi/match-route routes url)]\n    (or match {:handler :home :route-params {}})))\n\n(defn- set-route! [route]\n  (reset! current-route route))\n\n(defn- handle-route-change []\n  (let [path (.. js/window -location -pathname)\n        route (parse-url path)]\n    (set-route! route)))\n\n(defn header []\n  [:header.header\n   [:div.container\n    [:h1.title \"Draw.io C4 Diagram Comparison\"]\n    [:nav.nav\n     [:a.nav-link {:href \"/\"} \"Home\"]\n     [:a.nav-link {:href \"/upload\"} \"Upload\"]\n     [:a.nav-link {:href \"/diagrams\"} \"Diagrams\"]]]])\n\n(defn home-page []\n  [:div.page\n   [:div.container\n    [:h2 \"Welcome to Draw.io C4 Diagram Comparison\"]\n    [:p \"Upload your Draw.io diagrams and compare versions with advanced diff analysis.\"]\n    [:div.features\n     [:div.feature\n      [:h3 \"Upload & Parse\"]\n      [:p \"Support for PNG with embedded XML, raw XML, and paste data from Draw.io\"]]\n     [:div.feature\n      [:h3 \"Version Timeline\"]\n      [:p \"Automatic versioning with timestamp-based history\"]]\n     [:div.feature\n      [:h3 \"Advanced Comparison\"]\n      [:p \"Deep diff analysis with similarity scoring and change categorization\"]]]\n    [:div.actions\n     [:a.btn.btn-primary {:href \"/upload\"} \"Start Uploading\"]]]])\n\n(defn upload-page []\n  [:div.page\n   [:div.container\n    [:h2 \"Upload Diagram\"]\n    [upload/upload-component]]])\n\n(defn diagrams-page []\n  [:div.page\n   [:div.container\n    [:h2 \"Your Diagrams\"]\n    [:p \"Diagram list will be implemented here\"]]])\n\n(defn diagram-page []\n  (let [{:keys [id]} (:route-params @current-route)]\n    [:div.page\n     [:div.container\n      [:h2 (str \"Diagram: \" id)]\n      [:p \"Diagram details and comparison view will be implemented here\"]]]))\n\n(defn not-found-page []\n  [:div.page\n   [:div.container\n    [:h2 \"Page Not Found\"]\n    [:p \"The page you're looking for doesn't exist.\"]\n    [:a.btn {:href \"/\"} \"Go Home\"]]])\n\n(defn app []\n  [:div.app\n   [header]\n   [:main.main\n    (case (:handler @current-route)\n      :home [home-page]\n      :upload [upload-page]\n      :diagrams [diagrams-page]\n      :diagram [diagram-page]\n      [not-found-page])]])\n\n(defn ^:export init []\n  ;; Initialize storage\n  (storage/init!)\n  \n  ;; Set up routing\n  (handle-route-change)\n  (.addEventListener js/window \"popstate\" handle-route-change)\n  \n  ;; Override link clicks for SPA routing\n  (.addEventListener js/document \"click\"\n    (fn [e]\n      (let [target (.-target e)\n            href (.getAttribute target \"href\")]\n        (when (and href\n                   (= \"A\" (.-tagName target))\n                   (not (.getAttribute target \"target\"))\n                   (.startsWith href \"/\"))\n          (.preventDefault e)\n          (.pushState js/history nil \"\" href)\n          (handle-route-change)))))\n  \n  ;; Render app\n  (rdom/render [app] (.getElementById js/document \"app\"))\n  \n  (println \"Draw.io UI initialized!\"))"]}